{
  "$schema": "https://smapi.io/schemas/content-patcher.json",
  "Format": "2.8.0",
  "DynamicTokens": [
    {
      // true once Muffin is born
      "Name": "MuffinIsBorn",
      "Value": "ChildNames| contains={{ModId}}_muffin"
    },
    {
      // true once Cookie is born
      "Name": "CookieIsBorn",
      "Value": "ChildNames| contains={{ModId}}_cookie"
    },
    // SterlingKidRand: one of the kids
    {
      "Name": "SterlingKidRand",
      "Value": "",
    },
    {
      "Name": "SterlingKidRand",
      "Value": "muffin",
      "When": {
        "MuffinIsBorn": true,
      }
    },
    {
      "Name": "SterlingKidRand",
      "Value": "{{Random:cookie,muffin}}",
      "When": {
        "MuffinIsBorn": true,
        "CookieIsBorn": true,
      }
    },
    // dialogue random
    {
      "Name": "KidDialogueRandRange",
      "Value": "{{Range: 1,25}}"
    },
    {
      "Name": "KidDialogueRandRange",
      "Value": "{{Range: 1,36}}",
      "When": {
        "MuffinIsBorn": true,
        "CookieIsBorn": true
      }
    },
    {
      "Name": "KidDialogueRand",
      "Value": "{{Random: {{KidDialogueRandRange}}}}"
    },
    {
      "Name": "KidDialogueRand2",
      "Value": "{{Random: {{KidDialogueRandRange}}}}"
    },
    // little red school house
    {
      "Name": "LRSH_Active",
      "Value": false,
    },
    {
      "Name": "LRSH_Active",
      "Value": true,
      "When": {
        "HasMod": "Xiddav.LittleRedSchoolhouse",
        "HasSeenEvent": "9695002",
        "DayOfWeek": "Tuesday, Wednesday, Friday",
        "day |contains=9": false,
        "day |contains=23": false
      }
    },
    {
      "Name": "LRSH_Active",
      "Value": true,
      "When": {
        "HasMod": "Xiddav.LittleRedSchoolhouseLazy",
        "DayOfWeek": "Tuesday, Wednesday, Friday",
        "day |contains=9": false,
        "day |contains=23": false
      }
    },
  ],
  "Changes": [
    // general
    {
      "Action": "EditData",
      "Target": "mushymato.HaveMoreKids/Kids",
      "Entries": {
        "{{ModId}}_muffin": {
          "Parent": "Sterling",
          // Stay home when it is festival, so that default child add to festival logic can be used
          "IsNPCTodayCondition": "!IS_FESTIVAL_DAY",
        },
        "{{ModId}}_cookie": {
          "Parent": "Sterling",
          // guarentees that Cookie will be born after Muffin
          "Condition": "mushymato.HaveMoreKids_HAS_CHILD {{ModId}}_muffin",
          // Stay home when it is festival, so that default child add to festival logic can be used
          "IsNPCTodayCondition": "!IS_FESTIVAL_DAY",
        }
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/sterling-dialogue.json"
    },
    // little red school house
    {
      "Action": "EditData",
      "Target": "Characters/Dialogue/Penny",
      "Entries": {
        // add location dialogue for penny
        "Custom_SchoolHouse": "{{i18n:{{SterlingKidRand}}.Xiddav.LittleRedSchoolhouse.Penny}}"
      },
      "When": {
        "HasMod": "Xiddav.LittleRedSchoolhouse, Xiddav.LittleRedSchoolhouseLazy",
        "HasValue:{{SterlingKids}}": true
      }
    },
    // per kid
    {
      "Action": "Include",
      "FromFile": "data/kid.json",
      "LocalTokens": {
        "L@Kid": "muffin"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/kid.json",
      "LocalTokens": {
        "L@Kid": "cookie"
      }
    }
  ]
}