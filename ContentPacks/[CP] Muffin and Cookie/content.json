{
  "$schema": "https://smapi.io/schemas/content-patcher.json",
  "Format": "2.8.0",
  "ConfigSchema": {
    "Endearment_Muffin": {
      "AllowBlank": true
    },
    "Endearment_Cookie": {
      "AllowBlank": true
    }
  },
  "DynamicTokens": [
    {
      // true once Muffin is born
      "Name": "MuffinIsBorn",
      "Value": "{{ChildNames| contains={{ModId}}_muffin}}"
    },
    {
      // true once Cookie is born
      "Name": "CookieIsBorn",
      "Value": "{{ChildNames| contains={{ModId}}_cookie}}"
    },
    // SterlingKidRand: one of the kids
    {
      "Name": "SterlingKidRand",
      "Value": "",
    },
    {
      "Name": "SterlingKidRand",
      "Value": "muffin",
      "When": {
        "MuffinIsBorn": true,
      }
    },
    {
      "Name": "SterlingKidRand",
      "Value": "{{Random:cookie,muffin}}",
      "When": {
        "MuffinIsBorn": true,
        "CookieIsBorn": true,
      }
    },
    // dialogue random range
    {
      "Name": "KidDialogueRandRange",
      "Value": "{{Range: 1,25}}"
    },
    {
      "Name": "KidDialogueRandRange",
      "Value": "{{Range: 1,36}}",
      "When": {
        "MuffinIsBorn": true,
        "CookieIsBorn": true
      }
    },
    // little red school house
    {
      "Name": "LRSH_Active",
      "Value": false,
    },
    {
      "Name": "LRSH_Active",
      "Value": true,
      "When": {
        "HasMod": "Xiddav.LittleRedSchoolhouse",
        "HasSeenEvent": "9695002",
        "DayOfWeek": "Tuesday, Wednesday, Friday",
        "day |contains=9": false,
        "day |contains=23": false
      }
    },
    {
      "Name": "LRSH_Active",
      "Value": true,
      "When": {
        "HasMod": "Xiddav.LittleRedSchoolhouseLazy",
        "DayOfWeek": "Tuesday, Wednesday, Friday",
        "day |contains=9": false,
        "day |contains=23": false
      }
    },
  ],
  "Changes": [
    // kids
    {
      "Action": "Include",
      "FromFile": "data/kid.json",
      "LocalTokens": {
        "L@Kid": "muffin",
        "L@Endearment": "{{Endearment_Muffin}}"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/kid.json",
      "LocalTokens": {
        "L@Kid": "cookie",
        "L@Endearment": "{{Endearment_Cookie}}"
      }
    },
    // sterling dialogue
    {
      "Action": "Include",
      "FromFile": "data/sterling-dialogue.json"
    },
    // little red school house
    {
      "Action": "EditData",
      "Target": "Characters/Dialogue/Penny",
      "Entries": {
        // add location dialogue for penny
        "Custom_SchoolHouse": "{{i18n:{{SterlingKidRand}}.Xiddav.LittleRedSchoolhouse.Penny}}"
      },
      "When": {
        "HasMod": "Xiddav.LittleRedSchoolhouse, Xiddav.LittleRedSchoolhouseLazy",
        "HasValue:{{SterlingKids}}": true
      }
    },
  ]
}