{
  "$schema": "https://smapi.io/schemas/content-patcher.json",
  "Changes": [
    // This covers data shared between Muffin and Cookie
    // load all the textures
    {
      "Action": "Load",
      "Target": "Characters/{{ModId}}_{{L@Kid}}/fall_{{L@Kid}}, Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_fallfest, Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_flowerdance, Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_luau, Characters/{{ModId}}_{{L@Kid}}/spring_{{L@Kid}}, Characters/{{ModId}}_{{L@Kid}}/winter_{{L@Kid}}, Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_beach, Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_feast, Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_icefestival, Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_moonlightjellies, Characters/{{ModId}}_{{L@Kid}}/summer_{{L@Kid}}",
      "FromFile": "assets/Characters/{{L@Kid}}/{{TargetWithoutPath}}.png",
    },
    {
      "Action": "Load",
      "Target": "Portraits/{{ModId}}_{{L@Kid}}/fall_{{L@Kid}}, Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_fallfest, Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_flowerdance, Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_luau, Portraits/{{ModId}}_{{L@Kid}}/spring_{{L@Kid}}, Portraits/{{ModId}}_{{L@Kid}}/winter_{{L@Kid}}, Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_beach, Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_feast, Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_icefestival, Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_moonlightjellies, Portraits/{{ModId}}_{{L@Kid}}/summer_{{L@Kid}}",
      "FromFile": "assets/Portraits/{{L@Kid}}/{{TargetWithoutPath}}.png"
    },
    // Kid Definition
    {
      "Action": "EditData",
      "Target": "mushymato.HaveMoreKids/Kids",
      "Entries": {
        "{{ModId}}_{{L@Kid}}": {
          "Parent": "Sterling",
          // Use the kid version when it is a festival day
          "IsNPCTodayCondition": "!IS_FESTIVAL_DAY",
          // Use separate dialogue assets for the Child and the NPC
          "KidDialogueSheetName": "{{ModId}}_{{L@Kid}}_Kid",
          "NPCDialogueSheetName": "{{ModId}}_{{L@Kid}}_NPC",
          // Define how they behave during festivals
          "FestivalBehaviour": {
            // festival_spring23
            "festival_spring24": {
              "IsStationary": true
            },
            "festival_summer11": {
              "IsStationary": true
            },
            "festival_summer28": {
              "IsStationary": true
            },
            "festival_fall16": {
              "IsStationary": true
            },
            "festival_winter8": {
              "IsStationary": true
            },
            "festival_winter25": {
              "IsStationary": true
            }
          }
        },
      }
    },
    // Child Data
    {
      "Action": "EditData",
      "Target": "mushymato.HaveMoreKids/ChildData",
      "Entries": {
        "{{ModId}}_{{L@Kid}}": {
          "DisplayName": "{{i18n:{{L@Kid}}.DisplayName}}",
          "IsDarkSkinned": false,
          "Appearance": [
            // BABY APPEARANCE
            {
              // Any Id that starts with "HMK_BABY" is used specifically for the baby stages.
              // You may have several baby appearances, as long as the naming scheme is followed
              // Since ARV kids lack custom baby textures at the moment, use vanilla
              "Id": "HMK_BABY_1",
              "Sprite": "Characters/Baby"
            },
            // TODDLER APPEARANCE
            // Seasonals
            {
              // this is the normal toddler/npc sprite
              // for tecnical reasons, all HMK children need at least one unconditional Appearance entry, in this case use Spring as the default
              "Id": "{{L@Kid}}_Spring",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/spring_{{L@Kid}}",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/spring_{{L@Kid}}"
            },
            {
              "Id": "{{L@Kid}}_Summer",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/summer_{{L@Kid}}",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/summer_{{L@Kid}}",
              "Season": "Summer",
              "Precedence": -100,
            },
            {
              "Id": "{{L@Kid}}_Fall",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/fall_{{L@Kid}}",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/fall_{{L@Kid}}",
              "Season": "Fall",
              "Precedence": -100,
            },
            {
              "Id": "{{L@Kid}}_Winter",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/winter_{{L@Kid}}",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/winter_{{L@Kid}}",
              "Season": "Winter",
              "Precedence": -100,
            },
            // Beach
            {
              "Id": "{{L@Kid}}_Beach",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_beach",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_beach",
              "Condition": "LOCATION_NAME Target Beach",
              "Precedence": -500,
            },
            {
              "Id": "{{L@Kid}}_Island",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_beach",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_beach",
              "IsIslandAttire": true,
              "Precedence": -500,
            },
            // Festivals
            {
              "Id": "{{L@Kid}}_FlowerDance",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_flowerdance",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_flowerdance",
              "Condition": "IS_EVENT festival_spring24",
              "Precedence": -1000,
            },
            {
              "Id": "{{L@Kid}}_Luau",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_luau",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_luau",
              "Condition": "IS_EVENT festival_summer11",
              "Precedence": -1000,
            },
            {
              "Id": "{{L@Kid}}_MoonlightJellies",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_moonlightjellies",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_moonlightjellies",
              "Condition": "IS_EVENT festival_summer28",
              "Precedence": -1000,
            },
            {
              "Id": "{{L@Kid}}_StardewValleyFair",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_fallfest",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_fallfest",
              "Condition": "IS_EVENT festival_fall16",
              "Precedence": -1000,
            },
            {
              "Id": "{{L@Kid}}_IceFestival",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_icefestival",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_icefestival",
              "Condition": "IS_EVENT festival_winter8",
              "Precedence": -1000,
            },
            {
              "Id": "{{L@Kid}}_WinterStar",
              "Portrait": "Portraits/{{ModId}}_{{L@Kid}}/{{L@Kid}}_feast",
              "Sprite": "Characters/{{ModId}}_{{L@Kid}}/{{L@Kid}}_feast",
              "Condition": "IS_EVENT festival_winter25",
              "Precedence": -1000,
            },
          ]
        }
      }
    },
    // Dialogue
    {
      "Action": "Include",
      "FromFile": "data/kid-dialogue.json",
      "LocalTokens": {
        "L@Suffix": "Kid",
        "L@Rand": "{{Random: {{KidDialogueRandRange}}}}"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/kid-dialogue.json",
      "LocalTokens": {
        "L@Suffix": "NPC",
        "L@Rand": "{{Random: {{KidDialogueRandRange}}}}"
      }
    },
    // Festivals
    {
      "Action": "EditData",
      "Target": "Data/Festivals/spring13, Data/Festivals/spring24, Data/Festivals/summer11, Data/Festivals/summer28, Data/Festivals/fall16, Data/Festivals/winter8, Data/Festivals/winter25",
      "Entries": {
        "{{ModId}}_{{L@Kid}}": "{{i18n:{{L@Kid}}.Festivals.{{TargetWithoutPath}}_y1}}",
        "{{ModId}}_{{L@Kid}}_y2": "{{i18n:{{L@Kid}}.Festivals.{{TargetWithoutPath}}_y2}}",
      }
    },
    // Movie
    {
      "Action": "EditData",
      "Target": "Strings/Characters",
      "Entries": {
        "MovieInvite_Invited_{{ModId}}_{{L@Kid}}": "{{i18n:{{L@Kid}}.MovieInvite_Invited}}",
      },
    },
    {
      "Action": "EditData",
      "Target": "Data/MoviesReactions",
      "Entries": {
        "{{ModId}}_{{L@Kid}}": {
          "Name": "{{mushymato.HaveMoreKids/KidNPCId:{{ModId}}_{{L@Kid}}}}",
          "Reactions": [
            {
              "Tag": "*",
              "Response": "love", //This makes it so that they always love movies when their other parent is present at the theatre. Feel free to change this to "like" (if the kid isn't too enthused) or "dislike" (if you've got some family drama)
              "Whitelist": [
                "Sterling",
              ],
              "SpecialResponses": {
                "BeforeMovie": {
                  "ResponsePoint": null,
                  "Script": null,
                  "Text": "{{i18n:{{L@Kid}}.Movie.With_Parent_Before}}" //This is what they say before they watch the movie when the player's spouse or roommate is also in the theatre
                },
                "DuringMovie": {
                  "ResponsePoint": null,
                  "Script": "/message \"{{i18n:{{L@Kid}}.Movie.With_Parent_Script}}\"", //This is what's displayed when the player's spouse or roommate is also in the theatre. The /message part makes it so that the part in the second set of quotes is shown as a message onscreen (not a dialogue line). You can remove everything in DuringMovie and replace it with null if you want
                  "Text": null
                },
                "AfterMovie": {
                  "ResponsePoint": null,
                  "Script": null,
                  "Text": "{{i18n:{{L@Kid}}.Movie.With_Parent_After}}" //This is what they say after they watch the movie when the player's spouse or roommate is also in the theatre
                }
              },
              "Id": "reaction_3"
            },
            //Sample loved/liked/disliked tags, feel free to change them
            {
              "Tag": "family",
              "Response": "love",
              "Whitelist": [],
              "SpecialResponses": null,
              "Id": "reaction_0"
            },
            {
              "Tag": "horror",
              "Response": "dislike",
              "Whitelist": [],
              "SpecialResponses": null,
              "Id": "reaction_1"
            },
            {
              "Tag": "*",
              "Response": "like",
              "Whitelist": [],
              "SpecialResponses": null,
              "Id": "reaction_2"
            },
            {
              "Tag": "love",
              "Response": "love",
              "Whitelist": [],
              "SpecialResponses": {
                "BeforeMovie": {
                  "ResponsePoint": null,
                  "Script": null,
                  "Text": "{{i18n:{{L@Kid}}.Movie.love_Before}}" //This is what they say before they watch a loved movie
                },
                "DuringMovie": null,
                "AfterMovie": {
                  "ResponsePoint": null,
                  "Script": null,
                  "Text": "{{i18n:{{L@Kid}}.Movie.love_After}}" //This is what they say after they watch a loved movie
                }
              },
              "Id": "reaction_5"
            },
            {
              "Tag": "like",
              "Response": "like",
              "Whitelist": [],
              "SpecialResponses": {
                "BeforeMovie": {
                  "ResponsePoint": null,
                  "Script": null,
                  "Text": "{{i18n:{{L@Kid}}.Movie.like_Before}}" //This is what they say before they watch a liked movie
                },
                "DuringMovie": null,
                "AfterMovie": {
                  "ResponsePoint": null,
                  "Script": null,
                  "Text": "{{i18n:{{L@Kid}}.Movie.like_After}}" //This is what they say after they watch a liked movie
                }
              },
              "Id": "reaction_6"
            },
            {
              "Tag": "dislike",
              "Response": "dislike",
              "Whitelist": [],
              "SpecialResponses": {
                "BeforeMovie": {
                  "ResponsePoint": null,
                  "Script": null,
                  "Text": "{{i18n:{{L@Kid}}.Movie.dislike_Before}}" //This is what they say before they watch a disliked movie
                },
                "DuringMovie": null,
                "AfterMovie": {
                  "ResponsePoint": null,
                  "Script": null,
                  "Text": "{{i18n:{{L@Kid}}.Movie.dislike_After}}" //This is what they say after they watch a disliked movie
                }
              },
              "Id": "reaction_7"
            }
          ]
        }
      }
    },
    // Load blank schedule
    {
      // load blank.json
      "Action": "Load",
      "Target": "Characters/schedules/{{ModId}}_{{L@Kid}}",
      "FromFile": "data/blank.json"
    },
    // Include little red schoolhouse items
    {
      "Action": "Include",
      "FromFile": "data/xiddav-lrsh.json",
      "When": {
        "HasMod": "Xiddav.LittleRedSchoolhouse, Xiddav.LittleRedSchoolhouseLazy",
      }
    },
    // Include non-shared items
    {
      "Action": "Include",
      "FromFile": "data/unique-{{L@Kid}}.json"
    },
    // Include non-shared little red schoolhouse items
    {
      "Action": "Include",
      "FromFile": "data/xiddav-lrsh-{{L@Kid}}.json",
      "When": {
        "HasMod": "Xiddav.LittleRedSchoolhouse, Xiddav.LittleRedSchoolhouseLazy",
      }
    }
  ]
}